<!DOCTYPE html>
<!--
    Ethereal by HTML5 UP
    html5up.net | @ajlkn
    Ported into a Jekyll template by MOODULE
    https://moodule.github.io | @moodule
    Free for personal and commercial use under the CCA 4.0 license
-->
<html lang="en">
    
    <head>
    <title>My Homespace - </title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="https://moodule.github.io/assets/css/main.css" media="all" />
    <link rel="stylesheet" href="https://moodule.github.io/assets/css/large.css" media="screen and (min-width: 981px)" />
    <link rel="stylesheet" href="https://moodule.github.io/assets/css/medium.css" media="screen and (min-width: 737px) and (max-width:980px)" />
    <link rel="stylesheet" href="https://moodule.github.io/assets/css/small.css" media="screen and (max-width:736px)" />
    <link rel="stylesheet" href="https://moodule.github.io/assets/css/short.css" media="screen and (min-aspect-ratio:16/7)" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,300i,400i&display=swap" as="style" type="text/css" media="all">
    <link rel="stylesheet" href="https://moodule.github.io/assets/css/fontawesome-all.min.css" as="style" type="text/css" media="all">
    <link rel="stylesheet" href="https://moodule.github.io/assets/css/cookieconsent.min.css" as="style" type="text/css" media="all"><link rel="alternate" hreflang="en" href="/en/my-homespace/partition/" /><link rel="icon" href="https://moodule.github.io/assets/images/favicon.ico" /><noscript><link rel="stylesheet" href="https://moodule.github.io/assets/css/noscript.css" /></noscript>
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,300i,400i&display=swap" /></noscript>
    <noscript><link rel="stylesheet" href="https://moodule.github.io/assets/css/fontawesome-all.min.css" /></noscript>
    <noscript><link rel="stylesheet" href="https://moodule.github.io/assets/css/cookieconsent.min.css" /></noscript>
    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>My Homespace | Open Sourcerer / Vagabond Coder</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="My Homespace" />
<meta name="author" content="Moodule" />
<meta property="og:locale" content="en" />
<meta name="description" content="I’m a vagabond tinkerer, doing my best to give back to Open Source. I have a kink for tensors, I love functional programming and processing signals for hidden meaning. I spend what’s left of my time in remote places, they bring me back to the present to feel and think my way, literally." />
<meta property="og:description" content="I’m a vagabond tinkerer, doing my best to give back to Open Source. I have a kink for tensors, I love functional programming and processing signals for hidden meaning. I spend what’s left of my time in remote places, they bring me back to the present to feel and think my way, literally." />
<link rel="canonical" href="https://moodule.github.io/en/my-homespace/partition/" />
<meta property="og:url" content="https://moodule.github.io/en/my-homespace/partition/" />
<meta property="og:site_name" content="Open Sourcerer / Vagabond Coder" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-01-08T00:00:00+01:00" />
<script type="application/ld+json">
{"@type":"BlogPosting","headline":"My Homespace","dateModified":"2020-01-08T00:00:00+01:00","datePublished":"2020-01-08T00:00:00+01:00","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://moodule.github.io/assets/images/logo.png"},"name":"Moodule"},"url":"https://moodule.github.io/en/my-homespace/partition/","mainEntityOfPage":{"@type":"WebPage","@id":"https://moodule.github.io/en/my-homespace/partition/"},"author":{"@type":"Person","name":"Moodule"},"description":"I’m a vagabond tinkerer, doing my best to give back to Open Source. I have a kink for tensors, I love functional programming and processing signals for hidden meaning. I spend what’s left of my time in remote places, they bring me back to the present to feel and think my way, literally.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>


    <body class="is-preload">

        <div id="language-selector">
	<ul class="language"><li>
		    <a href="https://moodule.github.io/en/my-homespace/partition/" class="en">en</a>
		</li></ul>
</div>


        <!-- Page Wrapper -->
        <div id="page-wrapper">

            <!-- Wrapper -->
            <div id="wrapper">

                <section
class="panel banner 3 right "
id="banner"><!-- Banner -->
<div class="content color0 span-3-75">
    <h1 class="major">Partition The Disk<br />
    </h1>
    <p>The most annoying part, get over it and sail.<br>The operations are automated in <a href="https://github.com/moodule/homesick">scripts</a>.</p>
    <ul class="actions">
        <li>
            <a
            href="#wipe-the-disks"
            class="button primary color1 circle icon solid fa-angle-right">
                Next
            </a>
        </li>
    </ul>
</div>
<div
class="image filtered span-1-75"
data-position="25% 25%">
    <img class="lazy-loading" src="https://moodule.github.io/assets/images/placeholder/pillars-of-creation.webp" data-src="https://moodule.github.io/assets/images/content/pillars-of-creation.webp" alt="" />
</div>
</section>
<section
class="panel generic 2 right color1"
id="wipe-the-disks"><div class="intro joined color1-alt">
    <h2 class="major">Wipe the Disks</h2>
    <p>Now we commit!<br />I hope you thought this through :D</p>
</div>
<div class="inner columns aligned">
    <div class="span-4">
        <h3 class="major">Fill With Random Bits</h3>
        <pre><code># cryptsetup luksFormat /dev/sda<br /># cryptsetup open /dev/sda sda_crypt<br /># dd bs=1M status=progress if=/dev/zero of=/dev/mapper/sda_crypt<br /># cryptsetup close sda_crypt<br /># dd bs=512 count=2056 if=/dev/urandom of=/dev/sda</code></pre>
    </div>
    <div class="span-2">
        <h3 class="major">_</h3>
        <p>Enter a random single-use password.</p>
        <p>Courtesy of <a href="https://www.linuxglobal.com/quickly-fill-a-disk-with-random-bits-without-dev-urandom/">Eric Wheeler @Linux-Global</a>.</p>
        <p>Repeat for every drive you have: SSD, HDD, etc.</p>
    </div>
</div>

</section>
<section
class="panel generic 2 right color2"
id="create-raid-array"><div class="intro joined color2-alt">
    <h2 class="major">RAID Array</h2>
    <p></p>
</div>
<div class="inner columns aligned">
    <div class="span-4">
        <h3 class="major">Root</h3>
        <pre><code># mdadm --create --verbose --level=0 --metadata=1.2 --raid-devices=2 \
/dev/md0 \
/dev/sda1 /dev/sdb1</code></pre>
    </div>
</div>

</section>
<section
class="panel generic 2 right color2"
id="create-luks-container"><div class="intro joined color2-alt">
    <h2 class="major">LUKS Container</h2>
    <p></p>
</div>
<div class="inner columns aligned">
    <div class="span-4">
        <h3 class="major">Root</h3>
        <pre><code># cryptsetup -y -v --type luks luksFormat /dev/md0
# cryptsetup open /dev/md/root md_crypt</code></pre>
        <h3 class="major">Data</h3>
        <pre><code># cryptsetup -y -v --type luks luksFormat /dev/sdc1
# cryptsetup open /dev/sdc1 sdc1_crypt</code></pre>
    </div>
</div>


</section>
<section
class="panel generic 2 right color3"
id="create-logical-volumes"><div class="intro joined color3-alt">
    <h2 class="major">LVM</h2>
    <p></p>
</div>
<div class="inner columns aligned">
    <div class="span-4">
        <h3 class="major">Root</h3>
        <pre><code># pvcreate /dev/mapper/md_crypt
# vgcreate lvg /dev/mapper/md_crypt</code></pre>
        <h3 class="major">Logical Volumes</h3>
        <pre><code># lvcreate -L 8G -n swap lvg
# lvcreate -L 8G -n tmp lvg
# lvcreate -L 4G -n var lvg
# lvcreate -L 32G -n root lvg
# lvcreate -L 80G -n home lvg</code></pre>
    </div>
</div>


</section>
<section
class="panel generic 2 right color4"
id="file-systems"><div class="intro joined color4-alt">
    <h2 class="major">Format</h2>
    <p>Create the file systems.</p>
</div>
<div class="inner columns aligned">
    <div class="span-4">
        <h3 class="major">Boot</h3>
        <pre><code># mkfs.fat -F 32 /dev/sdd1</code></pre>
        <pre><code># mkfs.ext4 /dev/mapper/lvg-root
# mkfs.ext4 /dev/mapper/lvg-home
# mkfs.ext4 /dev/mapper/lvg-tmp
# mkfs.ext4 /dev/mapper/lvg-var</code></pre>
        <pre><code># mkswap /dev/mapper/lvg-swap</code></pre>
        <pre><code># mkfs.ext4 /dev/mapper/sdc1_crypt</code></pre>
    </div>
</div>


</section>
<section
class="panel generic 2 right color4"
id="index"><div class="intro joined color4-alt">
    <h2 class="major">Index</h2>
    <p>Map the filesystems to their target devices.</p>
</div>
<div class="inner columns aligned">
    <div class="span-4">
        <pre><code># mkdir -p /target/tmp
# mkdir -p /target/var
# mkdir -p /target/boot/efi</code></pre>
		<pre><code># mount /dev/mapper/lvg-root /target/
# mount /dev/mapper/lvg-tmp /target/tmp
# mount /dev/mapper/lvg-var /target/var
# mount /dev/sdd1 /target/boot/efi
# swapon /dev/mapper/lvg-swap</code></pre>
        <h3 class="major">(/target)/etc/fstab</h3>
        <pre><code># genfstab -U /target &gt;&gt; /target/etc/fstab</code></pre>
    </div>
</div>

</section>


            </div>

        </div>

        <!-- Footer -->
<footer id="footer">
    <ul class="copyright">
        <li>&copy; Moodule - MIT license</li>
        <li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
        <li>Jekyll integration: <a href="http://github.com/moodule" target="_blank">Moodule</a></li><li><a href="https://moodule.github.io/en/legal-terms/" target="_blank">Legal Terms</a></li><li><a href="https://moodule.github.io/en/privacy-policy/" target="_blank">Privacy Policy</a></li></ul>
</footer>


        <!-- Scripts -->
<script src="https://moodule.github.io/assets/js/jquery.min.js" type="text/javascript" defer ></script>
<script src="https://moodule.github.io/assets/js/browser.min.js" type="text/javascript" defer ></script>
<script src="https://moodule.github.io/assets/js/breakpoints.min.js" type="text/javascript" defer ></script>
<script src="https://moodule.github.io/assets/js/lazy-loading.min.js" type="text/javascript" defer ></script>
<script src="https://moodule.github.io/assets/js/main.min.js" type="text/javascript" defer ></script>
<script src="https://moodule.github.io/assets/js/cookieconsent.min.js" data-cfasync="false" type="text/javascript" defer ></script>
<script src="https://moodule.github.io/assets/js/cookieconsent.style.min.js" type="text/javascript" defer ></script>

    </body>
</html>
