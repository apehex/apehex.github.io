<!DOCTYPE html>
<!--
    Ethereal by HTML5 UP
    html5up.net | @ajlkn
    Ported into a Jekyll template by MOODULE
    https://moodule.github.io | @moodule
    Free for personal and commercial use under the CCA 4.0 license
-->
<html lang="en">
    
    <head>
    <title>My Homespace - </title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="https://moodule.github.io/assets/css/main.css" media="all" />
    <link rel="stylesheet" href="https://moodule.github.io/assets/css/large.css" media="screen and (min-width: 981px)" />
    <link rel="stylesheet" href="https://moodule.github.io/assets/css/medium.css" media="screen and (min-width: 737px) and (max-width:980px)" />
    <link rel="stylesheet" href="https://moodule.github.io/assets/css/small.css" media="screen and (max-width:736px)" />
    <link rel="stylesheet" href="https://moodule.github.io/assets/css/short.css" media="screen and (min-aspect-ratio:16/7)" />
    <link rel="preload" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,300i,400i&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet';this.media='all'">
    <link rel="preload" href="https://moodule.github.io/assets/css/fontawesome-all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet';this.media='all'">
    <link rel="preload" href="https://moodule.github.io/assets/css/cookieconsent.min.css" as="style" onload="this.onload=null;this.rel='stylesheet';this.media='all'"><link rel="alternate" hreflang="en" href="/en/blog/my-homespace/install/" /><link rel="icon" href="https://moodule.github.io/assets/images/favicon.ico" /><noscript><link rel="stylesheet" href="https://moodule.github.io/assets/css/noscript.css" /></noscript>
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,300i,400i&display=swap" /></noscript>
    <noscript><link rel="stylesheet" href="https://moodule.github.io/assets/css/fontawesome-all.min.css" /></noscript>
    <noscript><link rel="stylesheet" href="https://moodule.github.io/assets/css/cookieconsent.min.css" /></noscript>
    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>My Homespace | Open Sourcerer / Vagabond Coder</title>
<meta name="generator" content="Jekyll v4.0.1" />
<meta property="og:title" content="My Homespace" />
<meta name="author" content="Moodule" />
<meta property="og:locale" content="en" />
<meta name="description" content="I’m a vagabond tinkerer, doing my best to give back to Open Source. I have a kink for tensors, I love functional programming and processing signals for hidden meaning. I spend what’s left of my time in remote places, they bring me back to the present to feel and think my way, literally." />
<meta property="og:description" content="I’m a vagabond tinkerer, doing my best to give back to Open Source. I have a kink for tensors, I love functional programming and processing signals for hidden meaning. I spend what’s left of my time in remote places, they bring me back to the present to feel and think my way, literally." />
<link rel="canonical" href="https://moodule.github.io/en/blog/my-homespace/install/" />
<meta property="og:url" content="https://moodule.github.io/en/blog/my-homespace/install/" />
<meta property="og:site_name" content="Open Sourcerer / Vagabond Coder" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-01-08T00:00:00+01:00" />
<script type="application/ld+json">
{"@type":"BlogPosting","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://moodule.github.io/assets/images/logo.png"},"name":"Moodule"},"url":"https://moodule.github.io/en/blog/my-homespace/install/","headline":"My Homespace","dateModified":"2020-01-08T00:00:00+01:00","datePublished":"2020-01-08T00:00:00+01:00","description":"I’m a vagabond tinkerer, doing my best to give back to Open Source. I have a kink for tensors, I love functional programming and processing signals for hidden meaning. I spend what’s left of my time in remote places, they bring me back to the present to feel and think my way, literally.","author":{"@type":"Person","name":"Moodule"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://moodule.github.io/en/blog/my-homespace/install/"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>


    <body class="is-preload">

        <div id="language-selector">
	<ul class="language"><li>
		    <a href="https://moodule.github.io/en/blog/my-homespace/install/" class="en">en</a>
		</li></ul>
</div>


        <!-- Page Wrapper -->
        <div id="page-wrapper">

            <!-- Wrapper -->
            <div id="wrapper">

                <section
class="panel banner 3 right "
id="banner"><!-- Banner -->
<div class="content color0 span-3-75">
    <h1 class="major">Install<br />
    </h1>
    <p>Software & bootloader.</p>
    <ul class="actions">
        <li>
            <a
            href="#chroot"
            class="button primary color1 circle icon solid fa-angle-right">
                Next
            </a>
        </li>
    </ul>
</div>
<div
class="image filtered span-1-75"
data-position="25% 25%">
    <img class="lazy-loading" src="https://moodule.github.io/assets/images/placeholder/pillars-of-creation.webp" data-src="https://moodule.github.io/assets/images/content/pillars-of-creation.webp" alt="" />
</div>
</section>
<section
class="panel generic 2 right color1"
id="chroot"><div class="intro joined color1-alt">
    <h2 class="major">Chroot</h2>
    <p></p>
</div>
<div class="inner columns aligned">
    <div class="span-3">
        <pre><code># mkdir /target
# mount /dev/mapper/lvg-root /target/
# mount /dev/mapper/lvg-tmp /target/tmp
# mount /dev/mapper/lvg-var /target/var
# mount -o bind /proc /target/proc
# mount -o bind /dev /target/dev
# mount -o bind /dev/pts /target/dev/pts
# mount -o bind /sys /target/sys
        </code></pre>
        <pre><code># cd /target
# LANG=C.UTF-8 chroot /target /bin/bash
# mount /dev/md0/ESP /boot/efi
        </code></pre>
    </div>
</div>


</section>
<section
class="panel generic 2 right color4"
id="configuration"><div class="intro joined color4-alt">
    <h2 class="major">Configuration</h2>
    <p></p>
</div>
<div class="inner columns aligned">
    <div class="span-4">
        <h3 class="major">/etc/default/grub</h3>
        <pre><code>GRUB_PRELOAD_MODULES="lvm"
GRUB_DISABLE_OS_PROBER=true
GRUB_CMDLINE_LINUX="cryptdevice:/dev/md/root:md_crypt:allow-discards"</code></pre>
        <h3 class="major">/etc/crypttab</h3>
        <pre><code>md_crypt UUID=&lt;UUID&gt; none luks,discard</code></pre>
        <h3 class="major">/etc/cryptsetup-initramfs/conf-hook</h3>
        <pre><code>CRYPTSETUP=y</code></pre>
    </div>
</div>


</section>
<section
class="panel generic 2 right color2"
id="bootloader"><div class="intro joined color2-alt">
    <h2 class="major">Bootloader</h2>
    <p></p>
</div>
<div class="inner columns aligned">
    <div class="span-2">
        <h3 class="major">Generate The Boot Image</h3>
        <pre><code># update-initramfs -u
# update-grub</code></pre>
    </div>
</div>


</section>


            </div>

        </div>

        <!-- Footer -->
<footer id="footer">
    <ul class="copyright">
        <li>&copy; Moodule - MIT license</li>
        <li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
        <li>Jekyll integration: <a href="http://github.com/moodule" target="_blank">Moodule</a></li><li><a href="https://moodule.github.io/en/legal-terms/" target="_blank">Legal Terms</a></li><li><a href="https://moodule.github.io/en/privacy-policy/" target="_blank">Privacy Policy</a></li></ul>
</footer>


        <!-- Scripts -->
<script src="https://moodule.github.io/assets/js/jquery.min.js" type="text/javascript" defer ></script>
<script src="https://moodule.github.io/assets/js/browser.min.js" type="text/javascript" defer ></script>
<script src="https://moodule.github.io/assets/js/breakpoints.min.js" type="text/javascript" defer ></script>
<script src="https://moodule.github.io/assets/js/lazy-loading.min.js" type="text/javascript" defer ></script>
<script src="https://moodule.github.io/assets/js/main.min.js" type="text/javascript" defer ></script>
<script src="https://moodule.github.io/assets/js/cookieconsent.min.js" data-cfasync="false" type="text/javascript" defer ></script>
<script src="https://moodule.github.io/assets/js/cookieconsent.style.min.js" type="text/javascript" defer ></script>

    </body>
</html>
